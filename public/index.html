<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Speedcubing Trainer</title>
    <script type="text/javascript" src="/main.js"></script>
  </head>

  <body>
    <div id="elm-root"></div>
    <script>
      var app = Elm.Main.init({
        node: document.getElementById("elm-root"),
        flags: {
            width: window.innerWidth,
            height: window.innerHeight,
        }
      });
      // Taken from https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#safely_detecting_option_support
      var passiveSupported = false;

      try {
        var options = {
          get passive() { // This function will be called when the browser
                          //   attempts to access the passive property.
            passiveSupported = true;
            return false;
          }
        };

        window.addEventListener("test", null, options);
        window.removeEventListener("test", null, options);
      } catch(err) {
        passiveSupported = false;
      }


      /**
       * PORTS
       */
      app.ports.logError.subscribe(() => {});
      document.addEventListener("touchstart", app.ports.onTouchStart.send, passiveSupported ? {passive: true} : false);
    </script>
    <div id="debug"></div>
  </body>
</html>
