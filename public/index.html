<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <!--
      This is supposed to help remove touch delays. Taken from
      https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away
    -->
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
    <!--
      Just in case. It is deprecated but was
      recommended by https://css-tricks.com/snippets/html/responsive-meta-tag/

      Should be ignored by any browsers that don't support it though.
      also see https://developer.mozilla.org/en-US/docs/Web/CSS/@viewport
    -->
    <style>
      @-ms-viewport {
        width: device-width;
        height: device-height;
        zoom: 1;
      }
      @-o-viewport{
        width: device-width;
        height: device-height;
        zoom: 1;
      }
    </style>
    <title>Speedcubing Trainer</title>
    <script type="text/javascript" src="/main.js"></script>
  </head>

  <body>
    <script>
      var app = Elm.Main.init({
        flags: {
            width: window.innerWidth,
            height: window.innerHeight,
        }
      });
      // Taken from https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#safely_detecting_option_support
      var passiveSupported = false;

      try {
        var options = {
          get passive() { // This function will be called when the browser
                          //   attempts to access the passive property.
            passiveSupported = true;
            return false;
          }
        };

        window.addEventListener("test", null, options);
        window.removeEventListener("test", null, options);
      } catch(err) {
        passiveSupported = false;
      }


      /**
       * PORTS
       */
      app.ports.logError.subscribe(handleError);
      function handleError(errorString) {
        if (false/*IS_CYPRESS_TEST*/) {
          // This will be replaced in a cypress test where the IS_CYPRESS_TEST
          // false blocks have been string replaced to be true.
          // If this has not happened this block will be optimized
          // away by a minifier
          (() => {}/*HANDLE_ERROR_CYPRESS*/)(errorString);
        }
        // TODO: Setup Sentry
        console.error(errorString);
      }
    </script>
  </body>
</html>
