<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
    <title>Speedcubing Trainer</title>
    <script type="text/javascript" src="/main.js"></script>
    <script type="text/javascript" src="/sentry.js"></script>
  </head>

  <body>
    <script>
      if (window.location.hostname !== "localhost" && window.location.hostname !== "127.0.0.1") {
        Sentry.init({
          dsn: "https://3a5ba681f98246afaec422b5bd499b55@o571645.ingest.sentry.io/5720122",
          integrations: [new Sentry.Integrations.BrowserTracing()],

          // Set tracesSampleRate to 1.0 to capture 100%
          // of transactions for performance monitoring.
          // We recommend adjusting this value in production
          tracesSampleRate: 1.0,
        });
        function handleErrorBySentry(errorString) {
          Sentry.captureMessage(errorString, 'error');
        }
      }
      var app = Elm.Main.init({
        flags: {
            width: window.innerWidth,
            height: window.innerHeight,
        }
      });

      /**
       * PORTS
       */
      app.ports.logError.subscribe(handleError);
      function handleError(errorString) {
        if (false/*IS_CYPRESS_TEST*/) {
          // This will be replaced in a cypress test where the IS_CYPRESS_TEST
          // false blocks have been string replaced to be true.
          // If this has not happened this block will be optimized
          // away by a minifier
          (() => {}/*HANDLE_ERROR_CYPRESS*/)(errorString);
        }
        // TODO: Setup Sentry
        if (typeof handleErrorBySentry === 'function') handleErrorBySentry(errorString);
        else  console.error(errorString);
      }
    </script>
  </body>
</html>
